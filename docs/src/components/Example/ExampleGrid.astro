---
import raw from '../../data/examples.manifest.json?raw';
const items = JSON.parse(raw) as Array<{
  title: string; url: string; posterJpg: string; animWebp: string;
}>;
const sorted = items.slice().sort((a, b) => a.title.localeCompare(b.title));
---

<section class="wall" aria-label="Esempi">
  {sorted.map(item => (
    <a class="tile" href={item.url} aria-label={`Apri esempio ${item.title}`}>
      <picture>
        <source srcset={item.animWebp} type="image/webp" />
        <img class="media" src={item.animWebp} alt="" loading="lazy" decoding="async" />
      </picture>
      <div class="caption"><span class="t">{item.title}</span></div>
    </a>
  ))}
</section>

<style>
:global(body){ background:#0a0f1a; color:#dbe4ff;margin:0; padding:0; }

/* Griglia senza spazi, tile grandi */
.wall{
  --tile-min: 420px;
  --tile-ratio: 16/9;
  display:grid;
  gap:0;
  grid-template-columns:repeat(auto-fit, minmax(var(--tile-min), 1fr));
  align-items:stretch;
}

/* Tile piatte */
.tile{
  position:relative;
  display:block;
  aspect-ratio: var(--tile-ratio);
  overflow:hidden;
  background:#0b1220;
}

picture{ display:block; height:100%; }
.media{
  width:100%; height:100%;
  object-fit:cover; display:block;
  transform:scale(1);
  transition:transform .2s ease, filter .2s ease;
  filter:brightness(.96) contrast(1.02);
}
.tile:hover .media,
.tile:focus-visible .media{ transform:scale(1.02); filter:brightness(1); }

/* Titolo on-hover/focus */
.caption{
  position:absolute; inset:auto 0 0 0;
  padding:.7rem .9rem;
  background:linear-gradient(to top, rgba(0,0,0,.55), rgba(0,0,0,0) 80%);
  color:#e6ecff;
  transform:translateY(100%); opacity:0; pointer-events:none;
  transition:transform .2s ease, opacity .2s ease;
}
.t{
  font:600 1.05rem/1.15 system-ui, sans-serif;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  text-shadow:0 1px 2px rgba(0,0,0,.5);
}
.tile:hover .caption,
.tile:focus-visible .caption{ transform:translateY(0); opacity:1; }

/* Responsive */
@media (max-width: 480px){
  .wall{ --tile-min: 170px; }
  .t{ font-size:.95rem; }
}
@media (min-width: 481px) and (max-width: 900px){
  .wall{ --tile-min: 280px;
